!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-highlightjs",["exports","@angular/core","rxjs","rxjs/operators","@angular/common"],t):t((e=e||self)["ngx-highlightjs"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,r,n,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function o(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u}var u=new t.InjectionToken("HIGHLIGHT_OPTIONS"),a=function(){function e(e,t,o){var u=this;this._options=o,this._ready=new r.BehaviorSubject(null),this.ready=this._ready.asObservable().pipe(n.filter((function(e){return!!e})),n.take(1)),i.isPlatformBrowser(t)&&e.defaultView.hljs?this._ready.next(e.defaultView.hljs):this._loadLibrary().pipe(n.switchMap((function(t){return u._options&&u._options.lineNumbers?(e.defaultView.hljs=t,s(import("highlightjs-line-numbers.js")).pipe(n.tap((function(){return u._ready.next(t)})))):(u._ready.next(t),r.EMPTY)})),n.catchError((function(e){return console.error("Unable to load hljs library",e),r.EMPTY}))).subscribe()}return e.prototype._loadLibrary=function(){var e=this;return this._options&&this._options.languages&&Object.keys(this._options.languages).length?r.from(s(import("highlight.js/lib/highlight"))).pipe(n.switchMap((function(t){return e._loadLanguages(t)}))):r.from(s(import("highlight.js")))},e.prototype._loadLanguages=function(e){var t=Object.entries(this._options.languages).map((function(t){var r=o(t,2),i=r[0],u=r[1];return s(u()).pipe(n.tap((function(t){return e.registerLanguage(i,t)})))}));return r.zip.apply(void 0,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}(t)).pipe(n.map((function(){return e})))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[i.DOCUMENT]}]},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(i.DOCUMENT),t.ɵɵinject(t.PLATFORM_ID),t.ɵɵinject(u,8))},token:e,providedIn:"root"}),e}();var s=function(e){return r.from(e).pipe(n.filter((function(e){return!!e&&!!e.default})),n.map((function(e){return e.default})))},l=function(){function e(e,t){var r=this;this._loader=e,e.ready.pipe().subscribe((function(e){r._hljs=e,t&&t.config&&(e.configure(t.config),e.listLanguages().length<1&&console.error("[HighlightJS]: No languages were registered!"))}))}return Object.defineProperty(e.prototype,"hljs",{get:function(){return this._hljs},enumerable:!0,configurable:!0}),e.prototype.highlight=function(e,t,r,i){return this._loader.ready.pipe(n.map((function(n){return n.highlight(e,t,r,i)})))},e.prototype.highlightAuto=function(e,t){return this._loader.ready.pipe(n.map((function(r){return r.highlightAuto(e,t)})))},e.prototype.fixMarkup=function(e){return this._loader.ready.pipe(n.map((function(t){return t.fixMarkup(e)})))},e.prototype.highlightBlock=function(e){return this._loader.ready.pipe(n.map((function(t){return t.highlightBlock(e)})))},e.prototype.configure=function(e){return this._loader.ready.pipe(n.map((function(t){return t.configure(e)})))},e.prototype.initHighlighting=function(){return this._loader.ready.pipe(n.map((function(e){return e.initHighlighting()})))},e.prototype.registerLanguage=function(e,t){return this._loader.ready.pipe(n.tap((function(r){return r.registerLanguage(e,t)})))},e.prototype.listLanguages=function(){return this._loader.ready.pipe(n.map((function(e){return e.listLanguages()})))},e.prototype.getLanguage=function(e){return this._loader.ready.pipe(n.map((function(t){return t.getLanguage(e)})))},e.prototype.lineNumbersBlock=function(e){return this._loader.ready.pipe(n.filter((function(e){return!!e.lineNumbersBlock})),n.tap((function(t){return t.lineNumbersBlock(e)})))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:a},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(a),t.ɵɵinject(u,8))},token:e,providedIn:"root"}),e}();var p=function(){function e(e,r,n){this._hljs=r,this._options=n,this.highlighted=new t.EventEmitter,this._nativeElement=e.nativeElement}return e.prototype.ngOnChanges=function(e){e.code&&e.code.currentValue&&e.code.currentValue!==e.code.previousValue&&this.highlightElement(this.code,this.languages)},e.prototype.highlightElement=function(e,t){var r=this;this.setCode(e),this._hljs.highlightAuto(e,t).subscribe((function(e){r.setCode(e.value),r.lineNumbers&&r._options&&r._options.lineNumbers&&r.addLineNumbers(),r.highlighted.emit(e)}))},e.prototype.addLineNumbers=function(){var e=this;this.destroyLineNumbersObserver(),r.animationFrameScheduler.schedule((function(){e._hljs.lineNumbersBlock(e._nativeElement).subscribe(),e._lineNumbersObs=new MutationObserver((function(){"TABLE"===e._nativeElement.firstElementChild.tagName.toUpperCase()&&e._nativeElement.classList.add("hljs-line-numbers"),e.destroyLineNumbersObserver()})),e._lineNumbersObs.observe(e._nativeElement,{childList:!0})}))},e.prototype.destroyLineNumbersObserver=function(){this._lineNumbersObs&&(this._lineNumbersObs.disconnect(),this._lineNumbersObs=null)},e.prototype.setCode=function(e){var t=this;r.animationFrameScheduler.schedule((function(){return t._nativeElement.innerHTML=e}))},e.decorators=[{type:t.Directive,args:[{host:{"[class.hljs]":"true"},selector:"[highlight]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:l},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e.propDecorators={code:[{type:t.Input,args:["highlight"]}],languages:[{type:t.Input}],lineNumbers:[{type:t.Input}],highlighted:[{type:t.Output}]},e}();var c=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[p],exports:[p]}]}],e}();e.HIGHLIGHT_OPTIONS=u,e.Highlight=p,e.HighlightJS=l,e.HighlightLoader=a,e.HighlightModule=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-highlightjs.umd.min.js.map